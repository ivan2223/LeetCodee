<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <title>Longest Substring Without Repeating Characters</title>
</head>
<body class="text-center bg-dark">
        <div
          class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column text-light"
        >
          <main role="main" class="inner cover">
            <h1 class="cover-heading">Longest Substring Without Repeating Characters</h1>
            <div class="row justify-content-center">
              <p class="lead col-lg-6">
                    Given a string, find the length of the longest substring without repeating characters.
              </p>
            </div>
            <div class="container">
              <div class="row justify-content-center">
                <div class="input-group mb-3 col-lg-6">
                  <input
                    type="text"
                    id="1"
                    class="form-control"
                    placeholder="Cadena"
                    onkeypress="return soloLetras(event)"
                  />
                </div>
              </div>
            </div>
            <button id="3" class="btn btn-lg btn-secondary">Ok</button>
          </main>
        </div>
        <div></div>
    <script>

function soloLetras(e){
       key = e.keyCode || e.which;
       tecla = String.fromCharCode(key).toLowerCase();
       letras = " áéíóúabcdefghijklmnñopqrstuvwxyz";
       especiales = "8-37-39-46";

       tecla_especial = false
       for(var i in especiales){
            if(key == especiales[i]){
                tecla_especial = true;
                break;
            }
        }

        if(letras.indexOf(tecla)==-1 && !tecla_especial){
            return false;
        }
    }    
    
    const stringToArray = (str) => {
        let a = str.split('');
        return a;
    };

    const shortenString = (str) => {
        let arr;
        let hay = false;
        const arr2 = [];
        arr = stringToArray(str);
        arr.forEach((element, index, array) => {
            if(index === 0){
                arr2[index] = element;
            } else {
                //encotrar elemento en arr2 si existe.
                for (const el of arr2){ 
                    let esta = arr2.indexOf(element);
                    if(el !== element && esta < 0){
                        hay = true;
                        break;
                    }
                }
                if(hay) {
                    arr2.push(element);
                    hay = false;
                 }
                if(element !== array[index - 1] && element === array[index + 1] && element !== array[index + 2]){
                arr2.splice(index-1, 1);
                }
            }
        });
        let strCom = arr2.toString();
        //Quitar comas
        strCom = strCom.replace(/,/g, '');
        alert(`La cadena mas corta es: ${strCom} y su longitud es: ${arr2.length}`);
    };
    
     
    const Comenzar = () => {
        let a = document.getElementById("1").value; 
        shortenString(a);
    };

    document.getElementById('3').addEventListener('click', Comenzar);
    </script>
</body>
</html>